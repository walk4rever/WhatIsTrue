"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/verify";
exports.ids = ["pages/api/verify"];
exports.modules = {

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fverify&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fverify.ts&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fverify&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fverify.ts&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_verify_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/pages/api/verify.ts */ \"(api-node)/./src/pages/api/verify.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_pages_api_verify_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_src_pages_api_verify_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_verify_ts__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_verify_ts__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/verify\",\n        pathname: \"/api/verify\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _src_pages_api_verify_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGdmVyaWZ5JnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGc3JjJTJGcGFnZXMlMkZhcGklMkZ2ZXJpZnkudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ0U7QUFDMUQ7QUFDc0Q7QUFDdEQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHFEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxxREFBUTtBQUNwQztBQUNPLHdCQUF3Qix5R0FBbUI7QUFDbEQ7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3NyYy9wYWdlcy9hcGkvdmVyaWZ5LnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS92ZXJpZnlcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS92ZXJpZnlcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiAnJyxcbiAgICAgICAgZmlsZW5hbWU6ICcnXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fverify&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fverify.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./src/pages/api/verify.ts":
/*!*********************************!*\
  !*** ./src/pages/api/verify.ts ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var formidable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! formidable */ \"formidable\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([formidable__WEBPACK_IMPORTED_MODULE_0__]);\nformidable__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n// Configure to not parse the request body automatically\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\nasync function handler(req, res) {\n    if (req.method !== 'POST') {\n        return res.status(405).json({\n            error: 'Method not allowed'\n        });\n    }\n    try {\n        // Parse the form data - update for new formidable API\n        const options = {\n            keepExtensions: true\n        };\n        console.log(\"Parsing form data...\");\n        const formData = await new Promise((resolve, reject)=>{\n            const form = (0,formidable__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(options);\n            form.parse(req, (err, fields, files)=>{\n                if (err) {\n                    console.error(\"Form parsing error:\", err);\n                    return reject(err);\n                }\n                console.log(\"Fields received:\", fields);\n                console.log(\"Files received:\", files);\n                return resolve({\n                    fields,\n                    files\n                });\n            });\n        });\n        const { fields, files } = formData;\n        // Process based on content type - handle array format from formidable v4+\n        const contentTypeField = fields.contentType;\n        const contentType = Array.isArray(contentTypeField) ? contentTypeField[0] : contentTypeField;\n        if (!contentType) {\n            console.error(\"Missing content type in request\");\n            return res.status(400).json({\n                error: 'Missing content type'\n            });\n        }\n        console.log(`Processing content type: ${contentType}`);\n        let verificationResult;\n        if (contentType === 'text') {\n            const textContentField = fields.textContent;\n            const textContent = Array.isArray(textContentField) ? textContentField[0] : textContentField;\n            if (!textContent) {\n                console.error(\"Missing text content for text verification\");\n                return res.status(400).json({\n                    error: 'Missing text content'\n                });\n            }\n            verificationResult = await verifyTextContent(textContent);\n        } else if (contentType === 'url') {\n            const urlField = fields.url;\n            const url = Array.isArray(urlField) ? urlField[0] : urlField;\n            if (!url) {\n                console.error(\"Missing URL for URL verification\");\n                return res.status(400).json({\n                    error: 'Missing URL'\n                });\n            }\n            verificationResult = await verifyUrl(url);\n        } else if (contentType === 'file') {\n            const fileField = files.file;\n            const file = Array.isArray(fileField) ? fileField[0] : fileField;\n            if (!file) {\n                console.error(\"Missing file for file verification\");\n                return res.status(400).json({\n                    error: 'No file uploaded'\n                });\n            }\n            verificationResult = await verifyFile(file);\n        } else {\n            console.error(`Invalid content type: ${contentType}`);\n            return res.status(400).json({\n                error: 'Invalid content type'\n            });\n        }\n        // Return result\n        return res.status(200).json(verificationResult);\n    } catch (error) {\n        console.error('Error processing verification request:', error);\n        return res.status(500).json({\n            error: 'Error processing verification request'\n        });\n    }\n}\n// Text verification function\nasync function verifyTextContent(text) {\n    // Analyze the text for truthfulness\n    // Keywords check for demonstration purposes\n    // In a real-world implementation, you would use NLP or ML models\n    const misleadingKeywords = [\n        'fake',\n        'hoax',\n        'conspiracy',\n        'debunked',\n        'clickbait',\n        'shocking truth',\n        'they don\\'t want you to know',\n        'mainstream media won\\'t tell you',\n        'secret',\n        'hidden',\n        'cover-up',\n        'truth revealed'\n    ];\n    const credibleKeywords = [\n        'research',\n        'study',\n        'evidence',\n        'proven',\n        'verified',\n        'source',\n        'published',\n        'peer-reviewed',\n        'expert',\n        'data shows',\n        'statistics',\n        'analysis',\n        'according to experts',\n        'scientific',\n        'journal'\n    ];\n    const neutralKeywords = [\n        'reportedly',\n        'allegedly',\n        'claimed',\n        'according to',\n        'seemingly',\n        'possibly',\n        'potentially',\n        'suggests',\n        'may indicate',\n        'could be'\n    ];\n    // Convert text to lowercase for case-insensitive comparison\n    const lowerText = text.toString().toLowerCase();\n    // Count occurrences of keywords\n    const misleadingCount = misleadingKeywords.reduce((count, keyword)=>count + (lowerText.includes(keyword) ? 1 : 0), 0);\n    const credibleCount = credibleKeywords.reduce((count, keyword)=>count + (lowerText.includes(keyword) ? 1 : 0), 0);\n    const neutralCount = neutralKeywords.reduce((count, keyword)=>count + (lowerText.includes(keyword) ? 1 : 0), 0);\n    // Text analysis metrics\n    const textLength = text.toString().length;\n    const hasAdequateLength = textLength > 100;\n    // Check for exaggerated language (excessive punctuation)\n    const exclamationCount = (text.toString().match(/!/g) || []).length;\n    const questionCount = (text.toString().match(/\\?/g) || []).length;\n    const excessivePunctuation = exclamationCount + questionCount > text.toString().length / 50;\n    // Check for ALL CAPS sections (often used in sensational content)\n    const capsRegex = /[A-Z]{5,}/g;\n    const capsMatches = text.toString().match(capsRegex) || [];\n    const hasExcessiveCaps = capsMatches.length > 0;\n    // Check for balanced presentation (looking for \"but\", \"however\", etc.)\n    const balancingTerms = [\n        \"however\",\n        \"but\",\n        \"on the other hand\",\n        \"conversely\",\n        \"nevertheless\"\n    ];\n    const balancingTermCount = balancingTerms.reduce((count, term)=>count + (lowerText.includes(term) ? 1 : 0), 0);\n    const hasPerspectiveBalance = balancingTermCount > 0;\n    // Calculate confidence score (in a real app, this would use ML/AI)\n    let confidenceScore = 0.5; // Start at neutral\n    // Adjust based on keyword presence\n    confidenceScore += credibleCount * 0.08;\n    confidenceScore -= misleadingCount * 0.12;\n    confidenceScore -= neutralCount * 0.03;\n    // Adjust for text structure features\n    if (!hasAdequateLength) {\n        confidenceScore -= 0.1;\n    }\n    if (excessivePunctuation) {\n        confidenceScore -= 0.07;\n    }\n    if (hasExcessiveCaps) {\n        confidenceScore -= 0.08;\n    }\n    if (hasPerspectiveBalance) {\n        confidenceScore += 0.09;\n    }\n    // Cap the score between 0 and 1\n    confidenceScore = Math.max(0, Math.min(1, confidenceScore));\n    // Generate assessment based on score and detected patterns\n    let assessment = \"\";\n    let details = [];\n    // Create analysis details based on what we detected\n    let analysisDetails = [];\n    if (credibleCount > 0) {\n        analysisDetails.push({\n            point: `References credible information sources (${credibleCount} references)`,\n            confidence: 0.7 + credibleCount * 0.05\n        });\n    }\n    if (misleadingCount > 0) {\n        analysisDetails.push({\n            point: `Contains potential misinformation indicators (${misleadingCount} detected)`,\n            confidence: 0.7\n        });\n    }\n    if (!hasAdequateLength) {\n        analysisDetails.push({\n            point: \"Text is too short to provide adequate context\",\n            confidence: 0.85\n        });\n    }\n    if (excessivePunctuation) {\n        analysisDetails.push({\n            point: \"Uses sensational punctuation patterns often found in misleading content\",\n            confidence: 0.75\n        });\n    }\n    if (hasExcessiveCaps) {\n        analysisDetails.push({\n            point: \"Contains excessive capitalization, often used for exaggeration\",\n            confidence: 0.8\n        });\n    }\n    if (hasPerspectiveBalance) {\n        analysisDetails.push({\n            point: \"Presents multiple perspectives, indicating balanced reporting\",\n            confidence: 0.85\n        });\n    }\n    if (neutralCount > 2) {\n        analysisDetails.push({\n            point: \"Uses cautious language, avoiding absolute claims\",\n            confidence: 0.7\n        });\n    }\n    // Set the high-level assessment based on confidence score\n    if (confidenceScore >= 0.8) {\n        assessment = \"This content appears to be highly factual and reliable\";\n        // Select the most relevant details or use our analysis details\n        details = analysisDetails.length >= 3 ? analysisDetails.slice(0, 3) : [\n            {\n                point: \"Contains credible information and context\",\n                confidence: confidenceScore\n            },\n            {\n                point: \"Uses precise language and factual statements\",\n                confidence: confidenceScore + 0.05\n            },\n            {\n                point: \"No significant indicators of misinformation detected\",\n                confidence: confidenceScore + 0.1\n            }\n        ];\n    } else if (confidenceScore >= 0.6) {\n        assessment = \"This content appears to be mostly factual with some uncertainties\";\n        // Select the most relevant details or use our analysis details\n        details = analysisDetails.length >= 3 ? analysisDetails.slice(0, 3) : [\n            {\n                point: \"Contains generally reliable information\",\n                confidence: confidenceScore\n            },\n            {\n                point: \"Some claims may require additional verification\",\n                confidence: confidenceScore - 0.1\n            },\n            {\n                point: \"Presents a relatively balanced perspective\",\n                confidence: confidenceScore + 0.05\n            }\n        ];\n    } else if (confidenceScore >= 0.4) {\n        assessment = \"This content contains a mix of factual and questionable information\";\n        // Select the most relevant details or use our analysis details\n        details = analysisDetails.length >= 3 ? analysisDetails.slice(0, 3) : [\n            {\n                point: \"Some claims appear to be accurate\",\n                confidence: confidenceScore + 0.1\n            },\n            {\n                point: \"Contains potentially misleading statements\",\n                confidence: confidenceScore - 0.1\n            },\n            {\n                point: \"Additional context and verification recommended\",\n                confidence: confidenceScore - 0.05\n            }\n        ];\n    } else {\n        assessment = \"This content contains potentially misleading or inaccurate information\";\n        // Select the most relevant details or use our analysis details\n        details = analysisDetails.length >= 3 ? analysisDetails.slice(0, 3) : [\n            {\n                point: \"Contains language often associated with misinformation\",\n                confidence: 0.7\n            },\n            {\n                point: \"Makes claims without adequate supporting evidence\",\n                confidence: 0.8\n            },\n            {\n                point: \"Significant fact-checking is recommended\",\n                confidence: 0.9\n            }\n        ];\n    }\n    // Calculate overall confidence and cap between 0-1\n    details.forEach((detail)=>{\n        detail.confidence = Math.max(0, Math.min(1, detail.confidence));\n    });\n    return {\n        confidenceScore,\n        assessment,\n        details\n    };\n}\n// URL verification function\nasync function verifyUrl(url) {\n    // In a real app, you would fetch the URL content and analyze it\n    return {\n        confidenceScore: 0.76,\n        assessment: \"This content contains a mix of factual and misleading information\",\n        details: [\n            {\n                point: \"Multiple claims are not supported by reliable sources\",\n                confidence: 0.82\n            },\n            {\n                point: \"Some statistics are presented out of context\",\n                confidence: 0.79\n            },\n            {\n                point: \"Article contains credible information but lacks important context\",\n                confidence: 0.68\n            }\n        ]\n    };\n}\n// File verification function\nasync function verifyFile(file) {\n    // In a real app, you would analyze the file based on its type\n    const fileType = file.mimetype;\n    // For now, return mock data\n    return {\n        confidenceScore: 0.92,\n        assessment: \"This content appears to be highly factual and accurate\",\n        details: [\n            {\n                point: \"All key claims are verified by reliable sources\",\n                confidence: 0.95\n            },\n            {\n                point: \"Content presents balanced viewpoints\",\n                confidence: 0.89\n            },\n            {\n                point: \"Data is recent and accurately represented\",\n                confidence: 0.93\n            }\n        ]\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q3pCO1lBQ0U7Z0JBQUVGLE9BQU87Z0JBQTBEQyxZQUFZO1lBQUk7WUFDbkY7Z0JBQUVELE9BQU87Z0JBQXFEQyxZQUFZO1lBQUk7WUFDOUU7Z0JBQUVELE9BQU87Z0JBQTRDQyxZQUFZO1lBQUk7U0FDdEU7SUFDTDtJQUVBLG1EQUFtRDtJQUNuREosUUFBUU0sT0FBTyxDQUFDQyxDQUFBQTtRQUNkQSxPQUFPSCxVQUFVLEdBQUdSLEtBQUtDLEdBQUcsQ0FBQyxHQUFHRCxLQUFLRSxHQUFHLENBQUMsR0FBR1MsT0FBT0gsVUFBVTtJQUMvRDtJQUVBLE9BQU87UUFDTFQ7UUFDQUk7UUFDQUM7SUFDRjtBQUNGO0FBRUEsNEJBQTRCO0FBQzVCLGVBQWVyQyxVQUFVRCxHQUFHO0lBQzFCLGdFQUFnRTtJQUNoRSxPQUFPO1FBQ0xpQyxpQkFBaUI7UUFDakJJLFlBQVk7UUFDWkMsU0FBUztZQUNQO2dCQUFFRyxPQUFPO2dCQUF5REMsWUFBWTtZQUFLO1lBQ25GO2dCQUFFRCxPQUFPO2dCQUFnREMsWUFBWTtZQUFLO1lBQzFFO2dCQUFFRCxPQUFPO2dCQUFxRUMsWUFBWTtZQUFLO1NBQ2hHO0lBQ0g7QUFDRjtBQUVBLDZCQUE2QjtBQUM3QixlQUFldEMsV0FBV0QsSUFBSTtJQUM1Qiw4REFBOEQ7SUFDOUQsTUFBTTJDLFdBQVczQyxLQUFLNEMsUUFBUTtJQUU5Qiw0QkFBNEI7SUFDNUIsT0FBTztRQUNMZCxpQkFBaUI7UUFDakJJLFlBQVk7UUFDWkMsU0FBUztZQUNQO2dCQUFFRyxPQUFPO2dCQUFtREMsWUFBWTtZQUFLO1lBQzdFO2dCQUFFRCxPQUFPO2dCQUF3Q0MsWUFBWTtZQUFLO1lBQ2xFO2dCQUFFRCxPQUFPO2dCQUE2Q0MsWUFBWTtZQUFLO1NBQ3hFO0lBQ0g7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL3lmemh1L0RvY3VtZW50cy9SMTI5WFhYL0NvZGVSZXBvL1doYXRJc1RydWUvc3JjL3BhZ2VzL2FwaS92ZXJpZnkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xuaW1wb3J0IGZvcm1pZGFibGUgZnJvbSAnZm9ybWlkYWJsZSc7XG5pbXBvcnQgZnMgZnJvbSAnZnMnO1xuXG4vLyBDb25maWd1cmUgdG8gbm90IHBhcnNlIHRoZSByZXF1ZXN0IGJvZHkgYXV0b21hdGljYWxseVxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcbiAgYXBpOiB7XG4gICAgYm9keVBhcnNlcjogZmFsc2UsXG4gIH0sXG59O1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XG4gIGlmIChyZXEubWV0aG9kICE9PSAnUE9TVCcpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogJ01ldGhvZCBub3QgYWxsb3dlZCcgfSk7XG4gIH1cblxuICB0cnkge1xuICAgIC8vIFBhcnNlIHRoZSBmb3JtIGRhdGEgLSB1cGRhdGUgZm9yIG5ldyBmb3JtaWRhYmxlIEFQSVxuICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICBrZWVwRXh0ZW5zaW9uczogdHJ1ZSxcbiAgICB9O1xuICAgIFxuICAgIGNvbnNvbGUubG9nKFwiUGFyc2luZyBmb3JtIGRhdGEuLi5cIik7XG4gICAgY29uc3QgZm9ybURhdGEgPSBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCBmb3JtID0gZm9ybWlkYWJsZShvcHRpb25zKTtcbiAgICAgIGZvcm0ucGFyc2UocmVxLCAoZXJyLCBmaWVsZHMsIGZpbGVzKSA9PiB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRm9ybSBwYXJzaW5nIGVycm9yOlwiLCBlcnIpO1xuICAgICAgICAgIHJldHVybiByZWplY3QoZXJyKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZyhcIkZpZWxkcyByZWNlaXZlZDpcIiwgZmllbGRzKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJGaWxlcyByZWNlaXZlZDpcIiwgZmlsZXMpO1xuICAgICAgICByZXR1cm4gcmVzb2x2ZSh7IGZpZWxkcywgZmlsZXMgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBcbiAgICBjb25zdCB7IGZpZWxkcywgZmlsZXMgfSA9IGZvcm1EYXRhO1xuXG4gICAgLy8gUHJvY2VzcyBiYXNlZCBvbiBjb250ZW50IHR5cGUgLSBoYW5kbGUgYXJyYXkgZm9ybWF0IGZyb20gZm9ybWlkYWJsZSB2NCtcbiAgICBjb25zdCBjb250ZW50VHlwZUZpZWxkID0gZmllbGRzLmNvbnRlbnRUeXBlO1xuICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gQXJyYXkuaXNBcnJheShjb250ZW50VHlwZUZpZWxkKSA/IGNvbnRlbnRUeXBlRmllbGRbMF0gOiBjb250ZW50VHlwZUZpZWxkO1xuICAgIFxuICAgIGlmICghY29udGVudFR5cGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJNaXNzaW5nIGNvbnRlbnQgdHlwZSBpbiByZXF1ZXN0XCIpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdNaXNzaW5nIGNvbnRlbnQgdHlwZScgfSk7XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKGBQcm9jZXNzaW5nIGNvbnRlbnQgdHlwZTogJHtjb250ZW50VHlwZX1gKTtcbiAgICBsZXQgdmVyaWZpY2F0aW9uUmVzdWx0O1xuXG4gICAgaWYgKGNvbnRlbnRUeXBlID09PSAndGV4dCcpIHtcbiAgICAgIGNvbnN0IHRleHRDb250ZW50RmllbGQgPSBmaWVsZHMudGV4dENvbnRlbnQ7XG4gICAgICBjb25zdCB0ZXh0Q29udGVudCA9IEFycmF5LmlzQXJyYXkodGV4dENvbnRlbnRGaWVsZCkgPyB0ZXh0Q29udGVudEZpZWxkWzBdIDogdGV4dENvbnRlbnRGaWVsZDtcbiAgICAgIFxuICAgICAgaWYgKCF0ZXh0Q29udGVudCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiTWlzc2luZyB0ZXh0IGNvbnRlbnQgZm9yIHRleHQgdmVyaWZpY2F0aW9uXCIpO1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ01pc3NpbmcgdGV4dCBjb250ZW50JyB9KTtcbiAgICAgIH1cbiAgICAgIHZlcmlmaWNhdGlvblJlc3VsdCA9IGF3YWl0IHZlcmlmeVRleHRDb250ZW50KHRleHRDb250ZW50KTtcbiAgICB9IFxuICAgIGVsc2UgaWYgKGNvbnRlbnRUeXBlID09PSAndXJsJykge1xuICAgICAgY29uc3QgdXJsRmllbGQgPSBmaWVsZHMudXJsO1xuICAgICAgY29uc3QgdXJsID0gQXJyYXkuaXNBcnJheSh1cmxGaWVsZCkgPyB1cmxGaWVsZFswXSA6IHVybEZpZWxkO1xuICAgICAgXG4gICAgICBpZiAoIXVybCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiTWlzc2luZyBVUkwgZm9yIFVSTCB2ZXJpZmljYXRpb25cIik7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTWlzc2luZyBVUkwnIH0pO1xuICAgICAgfVxuICAgICAgdmVyaWZpY2F0aW9uUmVzdWx0ID0gYXdhaXQgdmVyaWZ5VXJsKHVybCk7XG4gICAgfSBcbiAgICBlbHNlIGlmIChjb250ZW50VHlwZSA9PT0gJ2ZpbGUnKSB7XG4gICAgICBjb25zdCBmaWxlRmllbGQgPSBmaWxlcy5maWxlO1xuICAgICAgY29uc3QgZmlsZSA9IEFycmF5LmlzQXJyYXkoZmlsZUZpZWxkKSA/IGZpbGVGaWVsZFswXSA6IGZpbGVGaWVsZDtcbiAgICAgIFxuICAgICAgaWYgKCFmaWxlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJNaXNzaW5nIGZpbGUgZm9yIGZpbGUgdmVyaWZpY2F0aW9uXCIpO1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ05vIGZpbGUgdXBsb2FkZWQnIH0pO1xuICAgICAgfVxuICAgICAgdmVyaWZpY2F0aW9uUmVzdWx0ID0gYXdhaXQgdmVyaWZ5RmlsZShmaWxlKTtcbiAgICB9IFxuICAgIGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcihgSW52YWxpZCBjb250ZW50IHR5cGU6ICR7Y29udGVudFR5cGV9YCk7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgY29udGVudCB0eXBlJyB9KTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gcmVzdWx0XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHZlcmlmaWNhdGlvblJlc3VsdCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgcHJvY2Vzc2luZyB2ZXJpZmljYXRpb24gcmVxdWVzdDonLCBlcnJvcik7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdFcnJvciBwcm9jZXNzaW5nIHZlcmlmaWNhdGlvbiByZXF1ZXN0JyB9KTtcbiAgfVxufVxuXG4vLyBUZXh0IHZlcmlmaWNhdGlvbiBmdW5jdGlvblxuYXN5bmMgZnVuY3Rpb24gdmVyaWZ5VGV4dENvbnRlbnQodGV4dCkge1xuICAvLyBBbmFseXplIHRoZSB0ZXh0IGZvciB0cnV0aGZ1bG5lc3NcblxuICAvLyBLZXl3b3JkcyBjaGVjayBmb3IgZGVtb25zdHJhdGlvbiBwdXJwb3Nlc1xuICAvLyBJbiBhIHJlYWwtd29ybGQgaW1wbGVtZW50YXRpb24sIHlvdSB3b3VsZCB1c2UgTkxQIG9yIE1MIG1vZGVsc1xuICBjb25zdCBtaXNsZWFkaW5nS2V5d29yZHMgPSBbXG4gICAgJ2Zha2UnLCAnaG9heCcsICdjb25zcGlyYWN5JywgJ2RlYnVua2VkJywgJ2NsaWNrYmFpdCcsIFxuICAgICdzaG9ja2luZyB0cnV0aCcsICd0aGV5IGRvblxcJ3Qgd2FudCB5b3UgdG8ga25vdycsICdtYWluc3RyZWFtIG1lZGlhIHdvblxcJ3QgdGVsbCB5b3UnLFxuICAgICdzZWNyZXQnLCAnaGlkZGVuJywgJ2NvdmVyLXVwJywgJ3RydXRoIHJldmVhbGVkJ1xuICBdOyBcbiAgY29uc3QgY3JlZGlibGVLZXl3b3JkcyA9IFtcbiAgICAncmVzZWFyY2gnLCAnc3R1ZHknLCAnZXZpZGVuY2UnLCAncHJvdmVuJywgJ3ZlcmlmaWVkJywgJ3NvdXJjZScsXG4gICAgJ3B1Ymxpc2hlZCcsICdwZWVyLXJldmlld2VkJywgJ2V4cGVydCcsICdkYXRhIHNob3dzJywgJ3N0YXRpc3RpY3MnLFxuICAgICdhbmFseXNpcycsICdhY2NvcmRpbmcgdG8gZXhwZXJ0cycsICdzY2llbnRpZmljJywgJ2pvdXJuYWwnXG4gIF07XG4gIGNvbnN0IG5ldXRyYWxLZXl3b3JkcyA9IFtcbiAgICAncmVwb3J0ZWRseScsICdhbGxlZ2VkbHknLCAnY2xhaW1lZCcsICdhY2NvcmRpbmcgdG8nLCAnc2VlbWluZ2x5JyxcbiAgICAncG9zc2libHknLCAncG90ZW50aWFsbHknLCAnc3VnZ2VzdHMnLCAnbWF5IGluZGljYXRlJywgJ2NvdWxkIGJlJ1xuICBdO1xuICBcbiAgLy8gQ29udmVydCB0ZXh0IHRvIGxvd2VyY2FzZSBmb3IgY2FzZS1pbnNlbnNpdGl2ZSBjb21wYXJpc29uXG4gIGNvbnN0IGxvd2VyVGV4dCA9IHRleHQudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpO1xuICBcbiAgLy8gQ291bnQgb2NjdXJyZW5jZXMgb2Yga2V5d29yZHNcbiAgY29uc3QgbWlzbGVhZGluZ0NvdW50ID0gbWlzbGVhZGluZ0tleXdvcmRzLnJlZHVjZSgoY291bnQsIGtleXdvcmQpID0+IFxuICAgIGNvdW50ICsgKGxvd2VyVGV4dC5pbmNsdWRlcyhrZXl3b3JkKSA/IDEgOiAwKSwgMCk7XG4gIFxuICBjb25zdCBjcmVkaWJsZUNvdW50ID0gY3JlZGlibGVLZXl3b3Jkcy5yZWR1Y2UoKGNvdW50LCBrZXl3b3JkKSA9PiBcbiAgICBjb3VudCArIChsb3dlclRleHQuaW5jbHVkZXMoa2V5d29yZCkgPyAxIDogMCksIDApO1xuICBcbiAgY29uc3QgbmV1dHJhbENvdW50ID0gbmV1dHJhbEtleXdvcmRzLnJlZHVjZSgoY291bnQsIGtleXdvcmQpID0+IFxuICAgIGNvdW50ICsgKGxvd2VyVGV4dC5pbmNsdWRlcyhrZXl3b3JkKSA/IDEgOiAwKSwgMCk7XG4gIFxuICAvLyBUZXh0IGFuYWx5c2lzIG1ldHJpY3NcbiAgY29uc3QgdGV4dExlbmd0aCA9IHRleHQudG9TdHJpbmcoKS5sZW5ndGg7XG4gIGNvbnN0IGhhc0FkZXF1YXRlTGVuZ3RoID0gdGV4dExlbmd0aCA+IDEwMDtcbiAgXG4gIC8vIENoZWNrIGZvciBleGFnZ2VyYXRlZCBsYW5ndWFnZSAoZXhjZXNzaXZlIHB1bmN0dWF0aW9uKVxuICBjb25zdCBleGNsYW1hdGlvbkNvdW50ID0gKHRleHQudG9TdHJpbmcoKS5tYXRjaCgvIS9nKSB8fCBbXSkubGVuZ3RoO1xuICBjb25zdCBxdWVzdGlvbkNvdW50ID0gKHRleHQudG9TdHJpbmcoKS5tYXRjaCgvXFw/L2cpIHx8IFtdKS5sZW5ndGg7XG4gIGNvbnN0IGV4Y2Vzc2l2ZVB1bmN0dWF0aW9uID0gKGV4Y2xhbWF0aW9uQ291bnQgKyBxdWVzdGlvbkNvdW50KSA+IHRleHQudG9TdHJpbmcoKS5sZW5ndGggLyA1MDtcbiAgXG4gIC8vIENoZWNrIGZvciBBTEwgQ0FQUyBzZWN0aW9ucyAob2Z0ZW4gdXNlZCBpbiBzZW5zYXRpb25hbCBjb250ZW50KVxuICBjb25zdCBjYXBzUmVnZXggPSAvW0EtWl17NSx9L2c7XG4gIGNvbnN0IGNhcHNNYXRjaGVzID0gdGV4dC50b1N0cmluZygpLm1hdGNoKGNhcHNSZWdleCkgfHwgW107XG4gIGNvbnN0IGhhc0V4Y2Vzc2l2ZUNhcHMgPSBjYXBzTWF0Y2hlcy5sZW5ndGggPiAwO1xuICBcbiAgLy8gQ2hlY2sgZm9yIGJhbGFuY2VkIHByZXNlbnRhdGlvbiAobG9va2luZyBmb3IgXCJidXRcIiwgXCJob3dldmVyXCIsIGV0Yy4pXG4gIGNvbnN0IGJhbGFuY2luZ1Rlcm1zID0gW1wiaG93ZXZlclwiLCBcImJ1dFwiLCBcIm9uIHRoZSBvdGhlciBoYW5kXCIsIFwiY29udmVyc2VseVwiLCBcIm5ldmVydGhlbGVzc1wiXTtcbiAgY29uc3QgYmFsYW5jaW5nVGVybUNvdW50ID0gYmFsYW5jaW5nVGVybXMucmVkdWNlKChjb3VudCwgdGVybSkgPT4gXG4gICAgY291bnQgKyAobG93ZXJUZXh0LmluY2x1ZGVzKHRlcm0pID8gMSA6IDApLCAwKTtcbiAgY29uc3QgaGFzUGVyc3BlY3RpdmVCYWxhbmNlID0gYmFsYW5jaW5nVGVybUNvdW50ID4gMDtcbiAgXG4gIC8vIENhbGN1bGF0ZSBjb25maWRlbmNlIHNjb3JlIChpbiBhIHJlYWwgYXBwLCB0aGlzIHdvdWxkIHVzZSBNTC9BSSlcbiAgbGV0IGNvbmZpZGVuY2VTY29yZSA9IDAuNTsgLy8gU3RhcnQgYXQgbmV1dHJhbFxuICBcbiAgLy8gQWRqdXN0IGJhc2VkIG9uIGtleXdvcmQgcHJlc2VuY2VcbiAgY29uZmlkZW5jZVNjb3JlICs9IGNyZWRpYmxlQ291bnQgKiAwLjA4O1xuICBjb25maWRlbmNlU2NvcmUgLT0gbWlzbGVhZGluZ0NvdW50ICogMC4xMjtcbiAgY29uZmlkZW5jZVNjb3JlIC09IG5ldXRyYWxDb3VudCAqIDAuMDM7XG4gIFxuICAvLyBBZGp1c3QgZm9yIHRleHQgc3RydWN0dXJlIGZlYXR1cmVzXG4gIGlmICghaGFzQWRlcXVhdGVMZW5ndGgpIHtcbiAgICBjb25maWRlbmNlU2NvcmUgLT0gMC4xO1xuICB9XG4gIGlmIChleGNlc3NpdmVQdW5jdHVhdGlvbikge1xuICAgIGNvbmZpZGVuY2VTY29yZSAtPSAwLjA3O1xuICB9XG4gIGlmIChoYXNFeGNlc3NpdmVDYXBzKSB7XG4gICAgY29uZmlkZW5jZVNjb3JlIC09IDAuMDg7XG4gIH1cbiAgaWYgKGhhc1BlcnNwZWN0aXZlQmFsYW5jZSkge1xuICAgIGNvbmZpZGVuY2VTY29yZSArPSAwLjA5O1xuICB9XG4gIFxuICAvLyBDYXAgdGhlIHNjb3JlIGJldHdlZW4gMCBhbmQgMVxuICBjb25maWRlbmNlU2NvcmUgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCBjb25maWRlbmNlU2NvcmUpKTtcbiAgXG4gIC8vIEdlbmVyYXRlIGFzc2Vzc21lbnQgYmFzZWQgb24gc2NvcmUgYW5kIGRldGVjdGVkIHBhdHRlcm5zXG4gIGxldCBhc3Nlc3NtZW50ID0gXCJcIjtcbiAgbGV0IGRldGFpbHMgPSBbXTtcbiAgXG4gIC8vIENyZWF0ZSBhbmFseXNpcyBkZXRhaWxzIGJhc2VkIG9uIHdoYXQgd2UgZGV0ZWN0ZWRcbiAgbGV0IGFuYWx5c2lzRGV0YWlscyA9IFtdO1xuICBcbiAgaWYgKGNyZWRpYmxlQ291bnQgPiAwKSB7XG4gICAgYW5hbHlzaXNEZXRhaWxzLnB1c2goeyBcbiAgICAgIHBvaW50OiBgUmVmZXJlbmNlcyBjcmVkaWJsZSBpbmZvcm1hdGlvbiBzb3VyY2VzICgke2NyZWRpYmxlQ291bnR9IHJlZmVyZW5jZXMpYCxcbiAgICAgIGNvbmZpZGVuY2U6IDAuNyArIChjcmVkaWJsZUNvdW50ICogMC4wNSlcbiAgICB9KTtcbiAgfVxuICBcbiAgaWYgKG1pc2xlYWRpbmdDb3VudCA+IDApIHtcbiAgICBhbmFseXNpc0RldGFpbHMucHVzaCh7IFxuICAgICAgcG9pbnQ6IGBDb250YWlucyBwb3RlbnRpYWwgbWlzaW5mb3JtYXRpb24gaW5kaWNhdG9ycyAoJHttaXNsZWFkaW5nQ291bnR9IGRldGVjdGVkKWAsIFxuICAgICAgY29uZmlkZW5jZTogMC43XG4gICAgfSk7XG4gIH1cbiAgXG4gIGlmICghaGFzQWRlcXVhdGVMZW5ndGgpIHtcbiAgICBhbmFseXNpc0RldGFpbHMucHVzaCh7IFxuICAgICAgcG9pbnQ6IFwiVGV4dCBpcyB0b28gc2hvcnQgdG8gcHJvdmlkZSBhZGVxdWF0ZSBjb250ZXh0XCIsIFxuICAgICAgY29uZmlkZW5jZTogMC44NVxuICAgIH0pO1xuICB9XG4gIFxuICBpZiAoZXhjZXNzaXZlUHVuY3R1YXRpb24pIHtcbiAgICBhbmFseXNpc0RldGFpbHMucHVzaCh7IFxuICAgICAgcG9pbnQ6IFwiVXNlcyBzZW5zYXRpb25hbCBwdW5jdHVhdGlvbiBwYXR0ZXJucyBvZnRlbiBmb3VuZCBpbiBtaXNsZWFkaW5nIGNvbnRlbnRcIiwgXG4gICAgICBjb25maWRlbmNlOiAwLjc1XG4gICAgfSk7XG4gIH1cbiAgXG4gIGlmIChoYXNFeGNlc3NpdmVDYXBzKSB7XG4gICAgYW5hbHlzaXNEZXRhaWxzLnB1c2goeyBcbiAgICAgIHBvaW50OiBcIkNvbnRhaW5zIGV4Y2Vzc2l2ZSBjYXBpdGFsaXphdGlvbiwgb2Z0ZW4gdXNlZCBmb3IgZXhhZ2dlcmF0aW9uXCIsIFxuICAgICAgY29uZmlkZW5jZTogMC44XG4gICAgfSk7XG4gIH1cbiAgXG4gIGlmIChoYXNQZXJzcGVjdGl2ZUJhbGFuY2UpIHtcbiAgICBhbmFseXNpc0RldGFpbHMucHVzaCh7IFxuICAgICAgcG9pbnQ6IFwiUHJlc2VudHMgbXVsdGlwbGUgcGVyc3BlY3RpdmVzLCBpbmRpY2F0aW5nIGJhbGFuY2VkIHJlcG9ydGluZ1wiLCBcbiAgICAgIGNvbmZpZGVuY2U6IDAuODVcbiAgICB9KTtcbiAgfVxuICBcbiAgaWYgKG5ldXRyYWxDb3VudCA+IDIpIHtcbiAgICBhbmFseXNpc0RldGFpbHMucHVzaCh7IFxuICAgICAgcG9pbnQ6IFwiVXNlcyBjYXV0aW91cyBsYW5ndWFnZSwgYXZvaWRpbmcgYWJzb2x1dGUgY2xhaW1zXCIsIFxuICAgICAgY29uZmlkZW5jZTogMC43XG4gICAgfSk7XG4gIH1cbiAgXG4gIC8vIFNldCB0aGUgaGlnaC1sZXZlbCBhc3Nlc3NtZW50IGJhc2VkIG9uIGNvbmZpZGVuY2Ugc2NvcmVcbiAgaWYgKGNvbmZpZGVuY2VTY29yZSA+PSAwLjgpIHtcbiAgICBhc3Nlc3NtZW50ID0gXCJUaGlzIGNvbnRlbnQgYXBwZWFycyB0byBiZSBoaWdobHkgZmFjdHVhbCBhbmQgcmVsaWFibGVcIjtcbiAgICBcbiAgICAvLyBTZWxlY3QgdGhlIG1vc3QgcmVsZXZhbnQgZGV0YWlscyBvciB1c2Ugb3VyIGFuYWx5c2lzIGRldGFpbHNcbiAgICBkZXRhaWxzID0gYW5hbHlzaXNEZXRhaWxzLmxlbmd0aCA+PSAzID8gXG4gICAgICBhbmFseXNpc0RldGFpbHMuc2xpY2UoMCwgMykgOiBcbiAgICAgIFtcbiAgICAgICAgeyBwb2ludDogXCJDb250YWlucyBjcmVkaWJsZSBpbmZvcm1hdGlvbiBhbmQgY29udGV4dFwiLCBjb25maWRlbmNlOiBjb25maWRlbmNlU2NvcmUgfSxcbiAgICAgICAgeyBwb2ludDogXCJVc2VzIHByZWNpc2UgbGFuZ3VhZ2UgYW5kIGZhY3R1YWwgc3RhdGVtZW50c1wiLCBjb25maWRlbmNlOiBjb25maWRlbmNlU2NvcmUgKyAwLjA1IH0sXG4gICAgICAgIHsgcG9pbnQ6IFwiTm8gc2lnbmlmaWNhbnQgaW5kaWNhdG9ycyBvZiBtaXNpbmZvcm1hdGlvbiBkZXRlY3RlZFwiLCBjb25maWRlbmNlOiBjb25maWRlbmNlU2NvcmUgKyAwLjEgfVxuICAgICAgXTtcbiAgICAgIFxuICB9IGVsc2UgaWYgKGNvbmZpZGVuY2VTY29yZSA+PSAwLjYpIHtcbiAgICBhc3Nlc3NtZW50ID0gXCJUaGlzIGNvbnRlbnQgYXBwZWFycyB0byBiZSBtb3N0bHkgZmFjdHVhbCB3aXRoIHNvbWUgdW5jZXJ0YWludGllc1wiO1xuICAgIFxuICAgIC8vIFNlbGVjdCB0aGUgbW9zdCByZWxldmFudCBkZXRhaWxzIG9yIHVzZSBvdXIgYW5hbHlzaXMgZGV0YWlsc1xuICAgIGRldGFpbHMgPSBhbmFseXNpc0RldGFpbHMubGVuZ3RoID49IDMgPyBcbiAgICAgIGFuYWx5c2lzRGV0YWlscy5zbGljZSgwLCAzKSA6IFxuICAgICAgW1xuICAgICAgICB7IHBvaW50OiBcIkNvbnRhaW5zIGdlbmVyYWxseSByZWxpYWJsZSBpbmZvcm1hdGlvblwiLCBjb25maWRlbmNlOiBjb25maWRlbmNlU2NvcmUgfSxcbiAgICAgICAgeyBwb2ludDogXCJTb21lIGNsYWltcyBtYXkgcmVxdWlyZSBhZGRpdGlvbmFsIHZlcmlmaWNhdGlvblwiLCBjb25maWRlbmNlOiBjb25maWRlbmNlU2NvcmUgLSAwLjEgfSxcbiAgICAgICAgeyBwb2ludDogXCJQcmVzZW50cyBhIHJlbGF0aXZlbHkgYmFsYW5jZWQgcGVyc3BlY3RpdmVcIiwgY29uZmlkZW5jZTogY29uZmlkZW5jZVNjb3JlICsgMC4wNSB9XG4gICAgICBdO1xuICAgICAgXG4gIH0gZWxzZSBpZiAoY29uZmlkZW5jZVNjb3JlID49IDAuNCkge1xuICAgIGFzc2Vzc21lbnQgPSBcIlRoaXMgY29udGVudCBjb250YWlucyBhIG1peCBvZiBmYWN0dWFsIGFuZCBxdWVzdGlvbmFibGUgaW5mb3JtYXRpb25cIjtcbiAgICBcbiAgICAvLyBTZWxlY3QgdGhlIG1vc3QgcmVsZXZhbnQgZGV0YWlscyBvciB1c2Ugb3VyIGFuYWx5c2lzIGRldGFpbHNcbiAgICBkZXRhaWxzID0gYW5hbHlzaXNEZXRhaWxzLmxlbmd0aCA+PSAzID8gXG4gICAgICBhbmFseXNpc0RldGFpbHMuc2xpY2UoMCwgMykgOiBcbiAgICAgIFtcbiAgICAgICAgeyBwb2ludDogXCJTb21lIGNsYWltcyBhcHBlYXIgdG8gYmUgYWNjdXJhdGVcIiwgY29uZmlkZW5jZTogY29uZmlkZW5jZVNjb3JlICsgMC4xIH0sXG4gICAgICAgIHsgcG9pbnQ6IFwiQ29udGFpbnMgcG90ZW50aWFsbHkgbWlzbGVhZGluZyBzdGF0ZW1lbnRzXCIsIGNvbmZpZGVuY2U6IGNvbmZpZGVuY2VTY29yZSAtIDAuMSB9LFxuICAgICAgICB7IHBvaW50OiBcIkFkZGl0aW9uYWwgY29udGV4dCBhbmQgdmVyaWZpY2F0aW9uIHJlY29tbWVuZGVkXCIsIGNvbmZpZGVuY2U6IGNvbmZpZGVuY2VTY29yZSAtIDAuMDUgfVxuICAgICAgXTtcbiAgICAgIFxuICB9IGVsc2Uge1xuICAgIGFzc2Vzc21lbnQgPSBcIlRoaXMgY29udGVudCBjb250YWlucyBwb3RlbnRpYWxseSBtaXNsZWFkaW5nIG9yIGluYWNjdXJhdGUgaW5mb3JtYXRpb25cIjtcbiAgICBcbiAgICAvLyBTZWxlY3QgdGhlIG1vc3QgcmVsZXZhbnQgZGV0YWlscyBvciB1c2Ugb3VyIGFuYWx5c2lzIGRldGFpbHNcbiAgICBkZXRhaWxzID0gYW5hbHlzaXNEZXRhaWxzLmxlbmd0aCA+PSAzID8gXG4gICAgICBhbmFseXNpc0RldGFpbHMuc2xpY2UoMCwgMykgOiBcbiAgICAgIFtcbiAgICAgICAgeyBwb2ludDogXCJDb250YWlucyBsYW5ndWFnZSBvZnRlbiBhc3NvY2lhdGVkIHdpdGggbWlzaW5mb3JtYXRpb25cIiwgY29uZmlkZW5jZTogMC43IH0sXG4gICAgICAgIHsgcG9pbnQ6IFwiTWFrZXMgY2xhaW1zIHdpdGhvdXQgYWRlcXVhdGUgc3VwcG9ydGluZyBldmlkZW5jZVwiLCBjb25maWRlbmNlOiAwLjggfSxcbiAgICAgICAgeyBwb2ludDogXCJTaWduaWZpY2FudCBmYWN0LWNoZWNraW5nIGlzIHJlY29tbWVuZGVkXCIsIGNvbmZpZGVuY2U6IDAuOSB9XG4gICAgICBdO1xuICB9XG4gIFxuICAvLyBDYWxjdWxhdGUgb3ZlcmFsbCBjb25maWRlbmNlIGFuZCBjYXAgYmV0d2VlbiAwLTFcbiAgZGV0YWlscy5mb3JFYWNoKGRldGFpbCA9PiB7XG4gICAgZGV0YWlsLmNvbmZpZGVuY2UgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCBkZXRhaWwuY29uZmlkZW5jZSkpO1xuICB9KTtcblxuICByZXR1cm4ge1xuICAgIGNvbmZpZGVuY2VTY29yZSxcbiAgICBhc3Nlc3NtZW50LFxuICAgIGRldGFpbHNcbiAgfTtcbn1cblxuLy8gVVJMIHZlcmlmaWNhdGlvbiBmdW5jdGlvblxuYXN5bmMgZnVuY3Rpb24gdmVyaWZ5VXJsKHVybCkge1xuICAvLyBJbiBhIHJlYWwgYXBwLCB5b3Ugd291bGQgZmV0Y2ggdGhlIFVSTCBjb250ZW50IGFuZCBhbmFseXplIGl0XG4gIHJldHVybiB7XG4gICAgY29uZmlkZW5jZVNjb3JlOiAwLjc2LFxuICAgIGFzc2Vzc21lbnQ6IFwiVGhpcyBjb250ZW50IGNvbnRhaW5zIGEgbWl4IG9mIGZhY3R1YWwgYW5kIG1pc2xlYWRpbmcgaW5mb3JtYXRpb25cIixcbiAgICBkZXRhaWxzOiBbXG4gICAgICB7IHBvaW50OiBcIk11bHRpcGxlIGNsYWltcyBhcmUgbm90IHN1cHBvcnRlZCBieSByZWxpYWJsZSBzb3VyY2VzXCIsIGNvbmZpZGVuY2U6IDAuODIgfSxcbiAgICAgIHsgcG9pbnQ6IFwiU29tZSBzdGF0aXN0aWNzIGFyZSBwcmVzZW50ZWQgb3V0IG9mIGNvbnRleHRcIiwgY29uZmlkZW5jZTogMC43OSB9LFxuICAgICAgeyBwb2ludDogXCJBcnRpY2xlIGNvbnRhaW5zIGNyZWRpYmxlIGluZm9ybWF0aW9uIGJ1dCBsYWNrcyBpbXBvcnRhbnQgY29udGV4dFwiLCBjb25maWRlbmNlOiAwLjY4IH1cbiAgICBdXG4gIH07XG59XG5cbi8vIEZpbGUgdmVyaWZpY2F0aW9uIGZ1bmN0aW9uXG5hc3luYyBmdW5jdGlvbiB2ZXJpZnlGaWxlKGZpbGUpIHtcbiAgLy8gSW4gYSByZWFsIGFwcCwgeW91IHdvdWxkIGFuYWx5emUgdGhlIGZpbGUgYmFzZWQgb24gaXRzIHR5cGVcbiAgY29uc3QgZmlsZVR5cGUgPSBmaWxlLm1pbWV0eXBlO1xuICBcbiAgLy8gRm9yIG5vdywgcmV0dXJuIG1vY2sgZGF0YVxuICByZXR1cm4ge1xuICAgIGNvbmZpZGVuY2VTY29yZTogMC45MixcbiAgICBhc3Nlc3NtZW50OiBcIlRoaXMgY29udGVudCBhcHBlYXJzIHRvIGJlIGhpZ2hseSBmYWN0dWFsIGFuZCBhY2N1cmF0ZVwiLFxuICAgIGRldGFpbHM6IFtcbiAgICAgIHsgcG9pbnQ6IFwiQWxsIGtleSBjbGFpbXMgYXJlIHZlcmlmaWVkIGJ5IHJlbGlhYmxlIHNvdXJjZXNcIiwgY29uZmlkZW5jZTogMC45NSB9LFxuICAgICAgeyBwb2ludDogXCJDb250ZW50IHByZXNlbnRzIGJhbGFuY2VkIHZpZXdwb2ludHNcIiwgY29uZmlkZW5jZTogMC44OSB9LFxuICAgICAgeyBwb2ludDogXCJEYXRhIGlzIHJlY2VudCBhbmQgYWNjdXJhdGVseSByZXByZXNlbnRlZFwiLCBjb25maWRlbmNlOiAwLjkzIH1cbiAgICBdXG4gIH07XG59Il0sIm5hbWVzIjpbImZvcm1pZGFibGUiLCJjb25maWciLCJhcGkiLCJib2R5UGFyc2VyIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsIm9wdGlvbnMiLCJrZWVwRXh0ZW5zaW9ucyIsImNvbnNvbGUiLCJsb2ciLCJmb3JtRGF0YSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZm9ybSIsInBhcnNlIiwiZXJyIiwiZmllbGRzIiwiZmlsZXMiLCJjb250ZW50VHlwZUZpZWxkIiwiY29udGVudFR5cGUiLCJBcnJheSIsImlzQXJyYXkiLCJ2ZXJpZmljYXRpb25SZXN1bHQiLCJ0ZXh0Q29udGVudEZpZWxkIiwidGV4dENvbnRlbnQiLCJ2ZXJpZnlUZXh0Q29udGVudCIsInVybEZpZWxkIiwidXJsIiwidmVyaWZ5VXJsIiwiZmlsZUZpZWxkIiwiZmlsZSIsInZlcmlmeUZpbGUiLCJ0ZXh0IiwibWlzbGVhZGluZ0tleXdvcmRzIiwiY3JlZGlibGVLZXl3b3JkcyIsIm5ldXRyYWxLZXl3b3JkcyIsImxvd2VyVGV4dCIsInRvU3RyaW5nIiwidG9Mb3dlckNhc2UiLCJtaXNsZWFkaW5nQ291bnQiLCJyZWR1Y2UiLCJjb3VudCIsImtleXdvcmQiLCJpbmNsdWRlcyIsImNyZWRpYmxlQ291bnQiLCJuZXV0cmFsQ291bnQiLCJ0ZXh0TGVuZ3RoIiwibGVuZ3RoIiwiaGFzQWRlcXVhdGVMZW5ndGgiLCJleGNsYW1hdGlvbkNvdW50IiwibWF0Y2giLCJxdWVzdGlvbkNvdW50IiwiZXhjZXNzaXZlUHVuY3R1YXRpb24iLCJjYXBzUmVnZXgiLCJjYXBzTWF0Y2hlcyIsImhhc0V4Y2Vzc2l2ZUNhcHMiLCJiYWxhbmNpbmdUZXJtcyIsImJhbGFuY2luZ1Rlcm1Db3VudCIsInRlcm0iLCJoYXNQZXJzcGVjdGl2ZUJhbGFuY2UiLCJjb25maWRlbmNlU2NvcmUiLCJNYXRoIiwibWF4IiwibWluIiwiYXNzZXNzbWVudCIsImRldGFpbHMiLCJhbmFseXNpc0RldGFpbHMiLCJwdXNoIiwicG9pbnQiLCJjb25maWRlbmNlIiwic2xpY2UiLCJmb3JFYWNoIiwiZGV0YWlsIiwiZmlsZVR5cGUiLCJtaW1ldHlwZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./src/pages/api/verify.ts\n");

/***/ }),

/***/ "formidable":
/*!*****************************!*\
  !*** external "formidable" ***!
  \*****************************/
/***/ ((module) => {

module.exports = import("formidable");;

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fverify&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fverify.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();